%%%--------------------------------------------------------------------
%%% @author Krzysztof Trzepla
%%% @copyright (C) 2016 ACK CYFRONET AGH
%%% This software is released under the MIT license
%%% cited in 'LICENSE.txt'.
%%% @end
%%%--------------------------------------------------------------------
%%% @doc @todo write me!
%%% @end
%%%--------------------------------------------------------------------
-module(model_behaviour).
-author("Krzysztof Trzepla").

-type key() :: term().
-type diff() :: fun((record()) -> record()) | #{}.
-type record() :: tuple().

%%%===================================================================
%%% Behaviour functions
%%%===================================================================

%%--------------------------------------------------------------------
%% @todo write me!
%%--------------------------------------------------------------------
-callback fields() -> list(atom()).

%%--------------------------------------------------------------------
%% @todo write me!
%%--------------------------------------------------------------------
-callback create(Record :: record()) ->
    ok | {error, Reason :: term()}.

%%--------------------------------------------------------------------
%% @todo write me!
%%--------------------------------------------------------------------
-callback save(Record :: record()) ->
    ok | {error, Reason :: term()}.

%%--------------------------------------------------------------------
%% @todo write me!
%%--------------------------------------------------------------------
-callback update(Key :: key(), Diff :: diff()) ->
    ok | {error, Reason :: term()}.

%%--------------------------------------------------------------------
%% @todo write me!
%%--------------------------------------------------------------------
-callback get(Key :: key()) ->
    {ok, Record :: record()} | {error, Reason :: term()}.

%%--------------------------------------------------------------------
%% @todo write me!
%%--------------------------------------------------------------------
-callback exists(Key :: key()) ->
    boolean() | {error, Reason :: term()}.

%%--------------------------------------------------------------------
%% @todo write me!
%%--------------------------------------------------------------------
-callback delete(Key :: key()) ->
    ok | {error, Reason :: term()}.
